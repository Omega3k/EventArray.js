(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=[].slice;if(c="undefined"!=typeof require&&null!==require?require("backwards"):window.backwards,!c)throw new Error('Could not find "backwards" module');h=c.forEach,l=c.map,k=c.indexOf,s="__EventArrayHandlers-"+(new Date).getTime(),d=window.document,q=function(){return!0},p=function(){return!1},j=function(a){return a},e=function(a,b,c){return c?a:b},g=function(a){var b,c;return c=l(j,a),c.target||(c.target=c.srcElement||d),c.relatedTarget=e(c.toElement,c.fromElement,c.fromElement===c.target),c.preventDefault=function(){return c.returnValue=!1,void(c.isDefaultPrevented=q)},c.isDefaultPrevented=p,c.stopPropagation=function(){return c.cancelBubble=!0,void(c.isPropagationStopped=q)},c.isPropagationStopped=p,c.stopImmediatePropagation=function(){return this.isImmediatePropagationStopped=q,void this.stopPropagation()},c.isImmediatePropagationStopped=p,null!=c.clientX&&(d=d.documentElement,b=d.body,c.pageX=c.clientX+(d&&d.scrollLeft||b&&b.scrollLeft||0)-(d&&d.clientLeft||b&&b.clientLeft||0),c.pageY=c.clientY+(d&&d.scrollTop||b&&b.scrollTop||0)-(d&&d.clientTop||b&&b.clientTop||0)),c.which=c.charCode||c.keyCode,null!=c.button&&(c.button=c.button?0:c.button?1:c.button?2:0),c},b=function(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},o=function(a,b,c){return a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)},i=function(a,b){var c,d;return c=a[s],c||(c=a[s]={}),b?(d=c[b],d||(d=c[b]=[])):d=c,d},n=function(a,b){var c,d;if(d=i(a,b))try{delete a[s]}catch(e){if(c=e,!a.removeAttribute)throw new Error(c);a.removeAttribute(s)}},r=function(a){return a&&a.stopPropagation||(a=g(a||window.event)),f(a,i(this,a.type))},f=function(a,b){return h(function(b){var c,d,e;return b&&(c=b.callback,d=b.children,e=b.ctx,b.value=c?c.call(e,a,b.iterations,e):a,b.iterations++,d.length&&void 0!==b.value)?f(b.value,d):void 0},b)},m=function(a){var b,c;return b=a.parent[s].children,c=k(a,0,b),c>-1?b.splice(c,1):void 0},a=function(){function a(a,c){var d,e,f,g;"string"!=typeof a&&(e=a[s].children,g=a,f=c),"string"==typeof a&&(b(c,a,r),e=i(c,a),g=c),d={iterations:0,value:null,ctx:this,parent:g,children:[]},null!=f&&(d.callback=f),e.push(d),this[s]=e[e.length-1]}return a.prototype.map=function(b){return new a(this,b)},a.prototype.filter=function(b){return new a(this,t(b))},a.prototype.reduce=function(b,c){return new a(this,u(b,c))},a.prototype.publish=function(){return this},a.prototype.subscribe=function(b){return new a(this,b)},a.prototype.unsubscribe=function(){return void m(this[s])},a.prototype.concat=function(){var a;return a=1<=arguments.length?v.call(arguments,0):[],this},a.prototype.merge=a.concat,a}(),t=function(a){return function(b,c,d){return a(b,c,d)?b:void 0}},u=function(a,b){return function(c,d,e){return b=a(b,c,d,e)}},c.EventArray=a,function(a,b,c,d){"undefined"!=typeof define&&null!==define&&define.amd?define(b,[],d):"undefined"!=typeof exports&&null!==exports?"undefined"!=typeof module&&null!==module&&module.exports?module.exports=d():exports[b]=d():window[b]=d()}(this,"EventArray",[],function(){return a})}).call(this);